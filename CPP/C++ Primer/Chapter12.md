## Chapter 12 动态内存


### 内存模型

C++ 在程序执行时，将内存大方向划分为四个区域：

* 代码区：存放二进制代码，由操作系统进行管理。
* 全局区：存放全局变量、静态变量、字符串常量和其他常量（局部常量不在全局区）。
* 栈：由编译器自动分配释放，存放函数的参数值、局部变量等。
* 堆（heap）：由程序员分配和释放，若程序员未释放，程序结束时由操作系统回收。

### 对象生命周期

* 全局对象在程序启动时分配，程序结束时销毁；
* 局部对象在进入其定义所在程序块时被创建，离开块时销毁；
* 局部 static 对象在第一次使用前分配，程序结束时销毁；
* 动态分配对象生存期与在哪里创建无关，只有显式地被释放才会销毁；

### 动态内存与智能指针

* 动态内存管理：
  * new：在动态内存中为对象分配空间并返回一个指向该对象的指针。
  * delete：接受一个动态对象的指针，销毁该对象，并释放与之关联的内存。
* 智能指针：
  * 管理动态对象。
  * 行为类似常规指针。
  * 负责自动释放所指向的对象。
  * 智能指针也是模板，必须提供指针可以指向的类型。

*参考*

* [如何最简单、通俗地理解C++的内存四区？](https://www.zhihu.com/question/437500913/answer/1689107479)
* [c++是否应避免使用普通指针，而使用智能指针（包括shared，unique，weak）？](https://www.zhihu.com/question/319277442/answer/1517987598)