# 图像和大型数组类型

cv::Mat 类用于表示任意维度的数组。Mat 类分为数据实体的头和数据实体。矩阵头中包含矩阵尺寸、地址、引用次数等。在 OpenCV 在复制和传递图像时，只复制数据实体的头和指向存储数据的指针，因此在创建 Mat 类时，可以先创建数据实体的头后赋值

```cpp
Mat a;  // 创建数据实体的头
a = imread("test.jpg");   // 数据实体头中的指针指向数据实体
```

## 创建数组

数组的类型决定了它含有什么样的元素，一个有效的数据类型需要同时指明数据类型和通道数，如 CVC_32FC3 表示一个 3 通道 32 位浮点数。

![元素类型]()

Mat 构造函数主要分为几个类型：

* 输入行数列数构造二维数组
* cv::Size 构造二维数组
* 构造 n 维数组，并通过整形序列确定每一维数据维度
* 通过 cv::Scalar 初始化数据
* 提供指向数据块的指针

## 获取数组元素

访问一个元素的两种主要方法是通过位置或迭代器访问

### 直接访问

直接访问通过模板函数 at<>() 实现：

```cpp
cout << m.at<float>(3, 3) << endl;
```

多通道数组：

```cpp
cout << m.at<Vec2f>(3, 3)[0] << endl;
```

### 迭代器访问

读取只读数组使用 cv::MatConstIterator<> ,读取非只读使用 cv::MatIterator<>

### 通过块访问数组元素

## 矩阵表达式

## Mat 类其他函数

| 示例      |     描述 | 
| :--------: | :--------:| 
| m.type()    |   返回 Mat 元素类型（eg:CV_32FC3) |
| m.depth()    |   返回 Mat 通道中元素类型（eg:CV_32F) |
| m.channels()    |   返回 Mat 通道数目 |
| m.size()    |   以 cv::Size 返回 Mat 大小 |

