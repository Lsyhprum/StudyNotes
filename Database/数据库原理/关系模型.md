# WHAT

一个 关系(relation) 就是一个 Table

关系模型就是对 Table 进行描述, 其由三部分组成：

* 描述数据基本结构形式(Table/Relation)

* Table 间可能操作(关系运算)

* 操作约束条件(完整性约束)

# 基本结构——关系

关系 是 表 在数学层面的严格定义

## 列的取值范围——域

一组值的集合，具有相同数据类型

## 行的定义——笛卡尔积

一组域 D1 D2 ... Dn 的笛卡尔积为：

$$D_1 \times D_2 \times ...\times D_n = \{(d_1,d_2,...,d_n) | d_i \in D_i, i = 1,...,n\}$$

笛卡尔积是由 n 个域的所有可能 n-元组的集合

## 关系——笛卡尔积的子集

笛卡尔积的所有元组并不都有意义，从中抽取的 **有意义** 的元组称为关系

关系中为每个列取的名字称为 属性名（属性名 != 域名）

## 关系模式与关系

* 关系模式是关系的**结构**，关系是关系模式在某一时刻的**数据**

* 关系模式是**稳定**的，关系是某一时刻的值，是随时间**改变**的

## 关系特性

* 列是同质的
* 不同属性可能来自同一个与，必须给予属性名
* 列位置互换性
* 行位置互换性
* 元组不能完全相同（Table 可能不完全遵守）
* 第一范式：属性不可再分

## 候选码

关系中能唯一标识一个元组的 **属性组**，若从该属性组中去掉任何一个属性则不具备这一性质

eg: 

选课(S#, C#, Sname, Cname, Grade)  (S#, C#)为候选码  （S#, C#, Sname)不是候选码

Employee(ID, Name, Mobile) ID是候选码  Mobile 也是候选码

## 主码

多个候选码中选定一个作为主码

## 主属性、非主属性

包含在 **任何一个** 候选码中的属性称为主属性，其他称为非主属性

## 外码

关系 R 中的的一个属性组，不是 R 的候选码，但与另一个关系 S 的候选码相对应，则称为 R 的外码。

eg: 合同(合同号，名称，客户号)  客户(客户号，客户姓名，地址)  客户号是合同关系的外键

外码用于连接两个关系

# 基本操作 

并、差、积、选择、投影、交、自然连接、除、外连接

# 完整性约束

* 实体完整性：关系中主码不能为空值

* 参照完整性：关系 S 中外键必须等于 R 中的 **候选码** 或为 **空值**

* 用户自定义完整性：针对具体应用环境定义的完整性约束条件

# 小结

* 关系模型是对 Table 的描述，包括关系的结构、关系的操作、关系的完整性
* 关系是对表的数学定义
  * 域、元组、笛卡尔积
  * 行/记录 -> 元组、列名/列值 -> 属性/属性值、表标题/格式 -> 关系模式
  * 候选码、主码、主属性、非主属性、外码
* 完整性
  * 实体完整性——主码
  * 参照完整性——外码
  * 自定义完整性——属性和属性组合